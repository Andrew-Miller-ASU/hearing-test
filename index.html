<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hearing Test</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div id="container">
    <h1>Online Hearing Test</h1>
    <div id="calibration-page">
        <p id="calibration_page_text" style="margin-bottom:12px; text-align: left;">Welcome to the Online Hearing Test! First, let's ensure your audio devices are properly calibrated to your preferences. Click the "Test Volume" button below for the controls to play a sound. If you can hear the sound and it is an appropriate volume for you, click "Proceed To Test". Otherwise, please adjust your volume accordingly.</p>
        <button onclick="calibrationTest()">Test Volume</button>
        <button onclick="proceedToTest()">Proceed To Test</button>
        <audio id="calibrationTestAudio" style="display: none;" controls></audio><br>
    </div>
    <div id="din-calibration-page" style="display: none;">
        <p id="din_calibration_page_text" style="margin-bottom:12px; text-align: left;">Welcome to the Digit-In-Noise Calibration Page! Make sure that you're comfortable with the audio. Click "Test Volume" and listen for the sound. You should adjust your audio devices as necessary before proceeding. When you are ready to move on to the test, click the "Proceed to Test" button.</p>
        <button id="din_calibration_test_volume_btn">Test Volume</button>
        <button id="din_calibration_proceed_to_test_btn">Proceed To Test</button>
        <audio id="dinCalibrationTestAudio" style="display: none;" controls></audio><br>
    </div>

    <div id="ear-select" style="display:none; text-align:center; margin-top:20px;">
      <h3 style="margin-bottom:10px;">Which ear(s) would you like to test?</h3>
      <div id="three-toggle" class="toggle-container">
        <div class="toggle-segment" data-value="left"  onclick="selectTestEarMode('left')">Left</div>
        <div class="toggle-segment" data-value="right" onclick="selectTestEarMode('right')">Right</div>
        <div class="toggle-segment" data-value="both"  onclick="selectTestEarMode('both')">Both</div>
      </div>
    </div>

    <div id="mode-select" style="display: none;">
       <h2>Choose Your Test Mode</h2>
       <button onclick="startTest('both')">üîä No Headphones</button>
       <button onclick="startTest('headphones')">üéß Headphones (Left & Right)</button>
       <button onclick="startDbHlTest()">dB HL Testing</button>
       <button onclick="DinCalibrationPage()">DIN Test</button>
       <button onclick="startFreqTest()">Frequency Range (Highest Only)</button>
       <button onclick="startTemporalGapTest()">Temporal Gap Detection </button>
    </div>
    <div id="test-area" style="display: none;">
      <p><em>Click "Play", then tell us if you can hear the sound. This helps check your hearing sensitivity at different tones.</em></p>
      <p id="question">Press play to start the test</p>
      <audio id="tone" controls></audio><br>
      <button onclick="recordResponse(true)">Yes</button>
      <button onclick="recordResponse(false)">No</button>
    </div>

    <!--- dB HL Test Area ---->
    
    <div id="dbhl-test-area" style="display:none;">
      <p style="margin-bottom:12px; text-align: left;">Decibels Hearing Level, or dB HL, is a measure of the quietest sound you can hear relative to a person with normal hearing. If your dB HL is negative, then you hear better than average; if it's positive, then you hear worse than average. -10 to 15 dB is considered a normal range.</p>
      <p style="margin-bottom:12px; text-align: left;">This test will measure your dB HL by playing a 1 kHz tone for 1 second and seeing how you respond. If you can't hear the sound, then click "No", and it will become slightly louder. Once you're able to hear the tone, click "Yes" to end the test and receive your results.</p>
      <br>
      <div id="dbhl-controls" style="display:grid; grid-template-columns:max-content 110px 380px; grid-template-rows:auto auto; column-gap:48px; row-gap:8px; align-items:baseline; margin:8px 0;">
        <span id="dbhl-status" style="display:inline-block; width:22ch; white-space:normal; word-wrap:break-word; overflow-wrap:break-word; font-style:italic; padding-left:24px;"></span>
        <div id="dbhl-replay-row" style="display:none; padding-left:24px;">
          <button id="dbhl-replay-btn" type="button" style="padding:8px 12px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Replay</button>
        </div>
      </div>
      <br>
      <div id="dbhl-start-row" style="display:flex; justify-content:center; margin:12px 0;">
        <button id="dbhl-start-btn" type="button" style="padding:8px 12px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Start Test</button>
      </div>
      <div id="dbhl-response-row" style="display:none; gap:12px; margin:12px 0;">
        <button id="dbhl-yes" style="background:#16a34a; color:#fff; padding:8px 12px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Yes, I heard it</button>
        <button id="dbhl-no" style="background:#dc2626; color:#fff; padding:8px 12px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">No, I didn't hear it</button>
      </div>
      <div id="dbhl-results-area" style="display:none; flex-direction:column; align-items:center; justify-content:center; gap:12px; margin:12px 0; text-align:center;">
        <p id="dbhl-result" style="font-weight:600; margin-top:10px;"></p>
        <p id="dbhl-expected-age" style="font-weight:600; margin-top:10px;"></p>
        <img id="dbhl-diagram" src="charts/dbhl_norms.png" style="width:80%; max-width:600px; border-radius:8px; margin-top:12px;">
      </div>
      <pre id="dbhl-log" style="background:#f8f9fa; padding:10px; border-radius:8px; max-height:200px; overflow:auto; margin-top:8px;"></pre>
    </div>

    <!--- End dB HL Test Area ---->

    <!--- dB HL Calibration Dialog --->
    <div id="dbhl-modal-backdrop" style="
     position:fixed; inset:0; background:rgba(0,0,0,.5);
     display:none;
     align-items:flex-start;
     justify-content:center;
     z-index:9999;
     overflow:auto;
     padding-top:60px;
   ">
     <div id="dbhl-modal" role="dialog" aria-modal="true" aria-labelledby="dbhl-modal-title" style="
       background:#fff; border-radius:12px; padding:16px; width:min(700px, 92vw);
       box-shadow:0 10px 30px rgba(0,0,0,.25); max-height:85vh;
       display:flex; flex-direction:column;
     ">
       <div style="display:flex; justify-content:space-between; gap:12px;">
         <h3 id="dbhl-modal-title" style="margin:0; font-size:18px;">Test Calibration: Important!</h3>
       </div>
   
       <div id="dbhl-modal-body" style="margin-top:16px; overflow:auto;">
       
         <div id="dbhl-modal-cal-sel" style="display:flex; flex-direction:column; align-items:center; gap:10px;">
           <p style="text-align:center;">In order to receive the most accurate results, you need to calibrate your test. <b>This will require you to download and use an app on your iPhone or Android smartphone device.</b></p>
           <p style="text-align:center;">Please select an option:</p>
           <button id="dbhl-modal-yes-cal-btn" style="background:#16a34a; color:white; padding:8px 14px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Yes, I want to calibrate my test.</button>
           <button id="dbhl-modal-no-cal-btn" style="background:#dc2626; color:white; padding:8px 14px; border:none; border-radius:8px; font-weight:600; cursor:pointer;">I want to take the uncalibrated test.</button>
         </div>
   
         <div id="dbhl-modal-no-cal" style="display:none; flex-direction:column; align-items:center; gap:10px;">
           <p>Please set your computer's volume to around <b>75%</b> (it doesn't have to be exact), then select which type of listening equipment you'll be using to take the test. Press <b>Continue</b> to proceed.</p>
           <div style="display:flex; gap:16px; justify-content:center; align-items:flex-start; flex-wrap:wrap; margin:10px 0;">
             <img src="images/win_volume.png" style="max-width:350px; height:auto; display:block;">
             <img src="images/mac_volume.png" style="max-width:350px; height:auto; display:block;">
           </div>
           <label for="dbhl-modal-no-dev-sel" style="font-weight:600;">Listening device:</label>
           <select id="dbhl-modal-no-dev-sel">
             <option value="earphones">Earphones</option>
             <option value="overear">Over-ear headphones</option>
             <option value="onear">On-ear headphones</option>
           </select>
           <button id="dbhl-modal-continue-btn" type="button" style="
           background:#16a34a; color:white;
           padding:10px 20px; border:none; border-radius:8px;
           font-weight:600; cursor:pointer;">Continue</button>
         </div>
   
         <div id="dbhl-modal-calibration" style="display:none; flex-direction:column; align-items:center; text-align:left; gap:16px; padding:8px 0; max-width:600px; margin:0 auto;">
   
           <p>
             <b>1.</b> Set your computer's volume to around <b>75%</b> (it doesn't have to be exact). Make sure you have your <b>smartphone</b> and a pair of <b>headphones or earphones</b> with you, but don't put them on yet.
             Select which type of listening equipment you'll be using below:
           </p>
           <div style="display:flex; gap:16px; justify-content:center; align-items:flex-start; flex-wrap:wrap; margin:10px 0;">
             <img src="images/win_volume.png" style="max-width:350px; height:auto; display:block;">
             <img src="images/mac_volume.png" style="max-width:350px; height:auto; display:block;">
           </div>
           <label for="dbhl-modal-yes-dev-sel" style="font-weight:600;">Listening device:</label>
           <select id="dbhl-modal-yes-dev-sel">
             <option value="earphones">Earphones</option>
             <option value="overear">Over-ear headphones</option>
             <option value="onear">On-ear headphones</option>
           </select>
   
           <p>
             <b>2.</b> Download the
             <img src="images/decibel_x_icon.png" style="width:48px; height:48px; vertical-align:middle; margin:0 4px;">
             <b>Decibel X</b> app by SkyPaw on your iPhone or Android device.
           </p>
   
           <p><b>3.</b> Open the app.</p>
   
           <p>
             <b>4.</b> Press the edge of the phone containing the bottom microphone (usually the side where the charging port is) into the earpiece of your headphones. Try to cup your hands around your phone in order to create a tight seal against the cushion of the earpiece. Make sure you can still read the screen!
           </p>
   
           <img src="images/phone_earpiece_position_demo.png" alt="Diagram showing phone mic pressed against headphone earpiece" style="width:60%; max-width:400px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.15);">
   
           <p><b>5.</b> When you are ready, click the <b>Play</b> button below.</p>
   
           <button id="dbhl-modal-play-stop-btn" type="button" style="
           background:#2563eb; color:white;
           padding:10px 20px; border:none; border-radius:8px;
           font-weight:600; cursor:pointer;">
           ‚ñ∂ Play
           </button>
   
           <p>
             <b>6.</b> While the test tone is playing, and with your phone's microphone pressed against the earpiece, observe the decibel reading on the screen (it may fluctuate slightly). 
             Enter the reading below:
           </p>
   
           <img src="images/decibel_reading_in_app.png" style="width:60%; max-width:400px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.15);">
   
           <label for="dbhl-modal-cal-input" style="font-weight:600;">Decibel reading:</label>
           <input id="dbhl-modal-cal-input" type="number" step="0.1" placeholder="" style="width:120px; padding:6px 8px; border:1px solid #ccc; border-radius:6px; font-size:15px; text-align:center;">
   
           <p><b>7.</b> You‚Äôre finished! Click the button below to proceed with your calibrated test.</p>
   
           <button id="dbhl-modal-cal-done" type="button" style="
           background:#16a34a; color:white;
           padding:10px 20px; border:none; border-radius:8px;
           font-weight:600; cursor:pointer;">Done</button>
         </div>
   
       </div>
     </div>
   </div>




    <!---- Digits-in-Noise Test Area ----> 

    <div id="din-test-area" style="display:none;">
      <p style="margin-bottom:12px; text-align:left;">The Digits-in-Noise Test will measure your ability to discern speech in the presence of background noise.</p>
      <p style="margin-bottom:12px; text-align:left;">Click "Play" to listen to the audio, then enter the digits you heard and click "Submit" to check your accuracy.</p>

      <div id="din-test-controls">
        <p id="din-round-display" style="margin-top:24px; margin-bottom:12px; text-align:center; font-weight:bold;"></p>
        <div style="justify-content:center; margin-top:20px; margin-bottom:20px;">
          <button id="din-play-btn">Play</button>
        </div>
        <input
          id="digits-input"
          type="text"
          inputmode="numeric"
          pattern="[0-9]{3}"
          maxlength="3"
          style="
            font-size:64px;
            font-family:monospace;
            text-align:center;
            border:3px solid #cbd5e1;
            border-radius:10px;
            padding:8px;
            padding-left:calc(8px + 1ch);
            width:6ch;
            letter-spacing:1ch;
        ">
        <div id="din-submit-quit-div" style="justify-content:center; gap:24px; margin-top:20px;">
          <button id="din-submit-btn">Submit</button>
          <button id="din-quit-btn">Quit</button>
        </div>
      </div>

      <section id="din-results-section" style="display:none; margin-top:24px;">
        <h3 style="margin-bottom:8px;">Digits-in-Noise Results</h3>
        <table id="din-results-table" style="width:100%; border-collapse:collapse;">
          <thead>
            <tr>
              <th style="text-align:center; border-bottom:2px solid #e5e7eb; padding:8px;">Round #</th>
              <th style="text-align:center; border-bottom:2px solid #e5e7eb; padding:8px;">Digits played</th>
              <th style="text-align:center; border-bottom:2px solid #e5e7eb; padding:8px;">Digits heard</th>
              <th style="text-align:center; border-bottom:2px solid #e5e7eb; padding:8px;">Result</th>
              <th style="text-align:center; border-bottom:2px solid #e5e7eb; padding:8px;">SNR</th>
            </tr>
          </thead>
          <tbody id="din-results-tbody"></tbody>
        </table>
        <p id="din-best-snr-display" style="margin-top:12px; margin-bottom:12px; text-align:left; font-weight:bold;"></p>
        <div style="text-align: left;">
          <img src="charts/din_snr_norms.png" width="400">
        </div>
        <button id="din-restart-btn" onclick="resetDinTest()">Restart</button>
      </section>
    </div>
    
    
    <!--- End Digits-in-Noise Test Area -->
    
    
    
    <!-- Highest-Audible Frequency Test (frontend only; audio is a placeholder) -->
    <div id="freq-test-area" style="display:none;">
      <p style="margin-bottom:12px; text-align:left;">
        Click the "Play" button to play the sound, which will stop automatically after a few seconds.
        If you want to stop the sound before then, click the "Stop" button. 
        If you can still hear the tone, click the "Yes, I Can Still Hear It" button and the test will automatically prepare the next frequency for you.
        Click the "Play" button again when ready. If you need to manually change the frequency for any reason, you can do so with the "Increase" and "Decrease" buttons on the right of the box.
        When you reach the <strong>highest pitch you can still hear</strong>, click ‚ÄúNo, I Can't Hear It.‚Äù
        We recommend that you follow the "Next Suggested Frequency" listed below the box for a quick, yet efficient test, which will be done automatically with the "Yes, I Can Still Hear It" button. 
        However, you may follow your own judgement should you choose to. The test uses frequencies ranging from 2 kHz to 20 kHz.
      </p>

      <div style="display:flex; align-items:center; gap:12px; margin:12px 0;">
        <label for="freq-slider">Frequency:</label>
        <input
              id="freq-slider"
              type="number"
              min="2000"
              max="20000"
              step = "1000"
              value="1000"
              aria-label="Frequency (Hz)"
              onkeydown = "return false"
              oninput="updateFreqReadout()" 
              />
        <span id="freq-readout">1,000 Hz</span>
        <button id="freq-slider-increase-btn" onclick="eventListenerForFreqIncBtn()">Increase</button>
        <button id="freq-slider-decrease-btn" onclick="eventListenerForFreqDecBtn()">Decrease</button>
      </div>

      <div style="display:flex; gap:12px; margin:12px 0;">
        <button id="freq-play-btn" onclick="freqPlayPlaceholder()"
        style="background:#16a34a; color:#fff; padding:8px 12px; 
        border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Play</button>
        <button id="freq-stop-btn" onclick="freqStopPlaceholder()"
        style="background:#dc2626; color:#fff; padding:8px 12px;
         border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Stop</button>
        <span style="align-items:center; gap:12px; margin: 15px;" id="next_suggested_frequency"><b>Next Suggested Frequency Check: 3,000 Hz or 3 kHz</b></span>
      </div>

      <div style="display:flex; gap:12px; margin:12px 0;">
        <span style="align-items:center; gap:12px; margin: 15px;" id="freq_test_question_for_user"><b>Can you hear the frequency when you press "Play"? Check the sound status below.</b></span>
      </div>

      <div style="display:flex; gap:12px; margin:12px 0;">
        <button id="still-audible-btn" onclick="prepareFreqTestForNextFreq()"
        style="background:#16a34a; color:#fff; padding:8px 12px; 
        border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Yes, I Can Still Hear It</button>
        <button id="mark-highest-btn" onclick="pinpointingExactFrequencyPage()" 
        style="background:#dc2626; color:#fff; padding:8px 12px;
         border:none; border-radius:8px; font-weight:600; cursor:pointer;"
         >No, I Can't Hear It</button>
        <button onclick="backToModesFromFreq()">Back to Modes</button>
      </div>

      <p id="freq-status" style="font-style:italic;"></p>
    </div>
    <!-- Pinpoint Highest Audible Page for Highest-Audible Frequency Test-->
    <div id="pinpoint_highest_audible_for_freq_test" style="display:none;">
      <p id="pinpoint_highest_audible_for_freq_test_instructions"
      style="margin-bottom:12px; text-align:left;"></p>
      <div style="display:flex; align-items:center; gap:12px; margin:12px 0;">
        <label for="freq-slider2">Frequency:</label>
        <input
              id="freq-slider2"
              type="number"
              min="2000"
              max="20000"
              step = "1000"
              value="1000"
              aria-label="Frequency (Hz)"
              onkeydown = "return false"
              oninput="updateFreqReadout2()" 
              />
        <span id="freq-readout2">1,000 Hz</span>
        <button id="freq-slider-increase-btn" onclick="eventListenerForFreqIncBtn()">Increase</button>
        <button id="freq-slider-decrease-btn" onclick="eventListenerForFreqDecBtn()">Decrease</button>
      </div>

      <div style="display:flex; gap:12px; margin:12px 0;">
        <button id="freq-play-btn" onclick="freqPlayPlaceholder()"
        style="background:#16a34a; color:#fff; padding:8px 12px; 
        border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Play</button>
        <button id="freq-stop-btn" onclick="freqStopPlaceholder()"
        style="background:#dc2626; color:#fff; padding:8px 12px;
         border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Stop</button>
        <span style="align-items:center; gap:12px; margin: 15px; font-weight:bold;" id="next_suggested_frequency2"><b></b></span>
      </div>
      <div style="display:flex; gap:12px; margin:12px 0;">
        <span style="align-items:center; gap:12px; margin: 15px;" id="freq_test_question_for_user"><b>Can you hear the frequency when you press "Play"? Check the sound status below.</b></span>
      </div>

      <div style="display:flex; gap:12px; margin:12px 0;">
        <button id="still-audible-btn" onclick="prepareFreqTestForNextFreq()"
        style="background:#16a34a; color:#fff; padding:8px 12px; 
        border:none; border-radius:8px; font-weight:600; cursor:pointer;"
        >Yes, I Can Still Hear It</button>
        <button id="mark-highest-btn" onclick="prepareForMarkHighestFrequency()" 
        style="background:#dc2626; color:#fff; padding:8px 12px;
         border:none; border-radius:8px; font-weight:600; cursor:pointer;"
         >No, I Can't Hear It</button>
        <button onclick="backToModesFromFreq()">Back to Modes</button>
      </div>

      <p id="freq-status2" style="font-style:italic;"></p>
    </div>
    <!-- End of Pinpoint Highest Audible Page for Highest Audible Frequency Test-->
    <!-- Results for the Highest-Audible Frequency Test -->
    <section id="freq-results-area" style="display:none; margin-top:24px;">
      <h3 style="margin-bottom:8px;">Frequency Test Result</h3>
      <p id="freq-result-text"></p>
      <figure id="freq-norms" class="norms-figure">
          <img
            src="charts/High_Frequency_Hearing_Test_Age_Norms.png"
            alt="Age norms for highest audible frequency"
            class="norms-img"
            loading="lazy"
            decoding="async"
          />
          <figcaption class="norms-cap">Age norms (highest audible frequency).</figcaption>
      </figure>
      <p id="freq-results-norms-chart-explanation">
        <strong>The typical highest frequency range for hearing loss is between 2 kHz and 8 kHz. 
        If you fall in this range, consult with a specialist. </strong>

          <p id="freq-results-norms-simplified-explanation"></p>

        If you fall below the typical highest range for your demographic, 
        but can hear frequencies above 8 kHz, do not panic. While it might be a sign of frailty,
        either now or for the future, you are still above the range where hearing loss is typically
        found.
      </p>
      <div style="display:flex; gap:12px; margin-top:12px;">
        <button onclick="restartFreqTest()">Restart</button>
        <button onclick="backToModesFromFreq()">Back to Modes</button>
      </div>
    </section>

   <!-- End Highest-Audible Frequency Test -->

    <!-- Temporal Gap Detection  -->
   
    <div id="tg-test-area" style="display:none;">
      <p style="margin-bottom:12px; text-align:left;">
        Use headphones in a quiet room. Click <strong>Start</strong> to hear two short ‚Äúwhooshes.‚Äù 
        One has a tiny silent pause in the middle. After both sounds, choose 
        <strong>First</strong> or <strong>Second</strong> (or press <strong>1</strong>/<strong>2</strong>) for the one with the pause. 
        You can click <strong>Replay current trial</strong> to hear the same pair again. 
        This is a screening tool; results may vary by device and room noise.
      </p>

      <div id="tg-status" style="margin:8px 0; font-weight:600; text-align:center;">Ready</div>
      <div id="tg-progress" style="margin:8px 0; text-align:center;">Trial 0 / 12</div>
      <div style="width:100%; height:12px; border-radius:999px; background:#e5e7eb; overflow:hidden;">
        <div id="tg-progress-bar" style="height:100%; width:0%; background:#34d399;"></div>
      </div>

      <!-- START above the audios -->
     <div class="tg-top-controls">
        <button id="tg-start-btn"  onclick="tgBegin()">Start Test</button>
        <button id="tg-replay-btn" onclick="tgReplay()" disabled>Replay current trial</button>
      </div>
            <!-- Two ‚Äúaudio‚Äù panels left/right -->
      <div class="tg-grid">
        <div class="tg-audio">
          <div class="tg-audio-label">Audio 1 </div>
          <div class="tg-audio-visual" aria-hidden="true">A</div>
          <!-- selection under the audio -->
          <button id="tg-first-btn" class="big-choice" onclick="tgChoose(1)" disabled>First (1)</button>
        </div>

        <div class="tg-audio">
          <div class="tg-audio-label">Audio 2 </div>
          <div class="tg-audio-visual" aria-hidden="true">B</div>
          <!-- selection under the audio -->
          <button id="tg-second-btn" class="big-choice" onclick="tgChoose(2)" disabled>Second (2)</button>
        </div>
      </div>

  <!-- centered Back to Modes -->
  <div class="tg-bottom-controls">
    <button id="tg-back-btn" onclick="backToModesFromTG()">Back to Modes</button>
  </div>

  <section id="tg-results" style="display:none; margin-top:16px;">
    <h3 style="margin-bottom:6px;">Temporal Gap Result</h3>
    <p id="tg-result-summary">Your result will appear here when the audio engine is added.</p>
    <p style="margin-top:16px;">A common complaint among older adults, even those without diagnosable hearing loss, is difficulty understanding speech. A decline in auditory temporal processing, which can be measured by the temporal gap test, is one explanation for this problem. Studies show that gap detection thresholds increase (become worse) with age. Average temporal resolution among younger adults is 4.48 ms and the average among older adults is 5.16 ms. If your estimated temporal resolution is significantly higher than these numbers, it may indicate issues with processing speed and attention.</p>
  </section>
</div>


    <!-- End Temporal Gap Detection (2AFC) -->
    <!-- Results will appear here -->
    <!-- Always-visible summary -->
    <section id="summary-section" style="display: none; margin-top: 2rem;">
    <h2>Hearing Test Summary</h2>
    <p id="summary-text" style="font-size: 1.1rem; padding: 1rem;"></p>
    </section>

    <!-- Expandable detailed section -->
    <details id="results-detail" style="display: none;">
    <summary><h3>See Detailed Results (Table & Audiogram)</h3></summary>

    <div style="margin-top: 1rem;">
        <table id="results-table">
        <tr><th>Frequency (Hz)</th><th>Volume (dB)</th><th>Result</th></tr>
        </table>

        <h3>Audiogram</h3>
        <canvas id="audiogramChart" width="600" height="400"></canvas>
    </div>
    </details>
  </div>

  <script src="script.js"></script>
</body>
</html>
